<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üëë Admin Panel - Tu Maceta Ideal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ========================================
           TU MACETA IDEAL - ADMIN PANEL PROFESIONAL
        ======================================= */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: linear-gradient(135deg, #4a7c59 0%, #2d5016 100%);
            --primary-light: #10b981;
            --secondary: #e8f0e4;
            --accent: #ff6b35;
            --dark: #2d5016;
            --light: #f8fafc;
            --shadow: 0 10px 40px rgba(74,124,89,0.15);
            --shadow-hover: 0 20px 60px rgba(74,124,89,0.25);
        }
        
        body { 
            font-family: 'Inter', -apple-system, sans-serif; 
            background: linear-gradient(135deg, #f5f7f2 0%, #e8f0e4 50%, #d4e4c8 100%);
            color: var(--dark); 
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* HEADER */
        header { 
            background: var(--primary);
            color: white; 
            padding: 1rem 2rem; 
            display: flex; 
            align-items: center;
            position: sticky; 
            top: 0; 
            z-index: 1000; 
            box-shadow: var(--shadow);
        }
        .logo { 
            font-size: 1.8rem; 
            font-weight: 700; 
            background: linear-gradient(45deg, #fff, #e8f0e4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-right: 1rem;
        }
        .hamburger-menu { 
            font-size: 1.6rem; 
            cursor: pointer; 
            padding: 0.75rem; 
            border-radius: 12px; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: white;
        }
        .hamburger-menu:hover { 
            background: rgba(255,255,255,0.15); 
            transform: scale(1.1) rotate(90deg);
        }
        .header-right { display: flex; align-items: center; gap: 1.5rem; margin-left: auto; }
        .user-info { 
            background: rgba(255,255,255,0.2); 
            padding: 0.75rem 1.5rem; 
            border-radius: 25px; 
            font-weight: 500; 
            font-size: 0.95rem;
        }

        /* SIDEBAR */
        .sidebar { 
            position: fixed; 
            left: -320px; 
            top: 0; 
            width: 300px; 
            height: 100vh; 
            background: var(--primary);
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            z-index: 999; 
            padding: 2.5rem 0;
            box-shadow: 4px 0 40px rgba(0,0,0,0.2);
        }
        .sidebar.open { left: 0; }
        .sidebar-nav { list-style: none; }
        .sidebar-nav li { margin: 0.25rem 0; }
        .sidebar-nav a { 
            color: white; 
            text-decoration: none; 
            display: flex; 
            align-items: center; 
            padding: 1.25rem 2rem; 
            border-radius: 0 20px 20px 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }
        .sidebar-nav a::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, #ffeb3b, #ffd700);
        }
        .sidebar-nav a:hover { 
            background: rgba(255,255,255,0.15); 
            transform: translateX(8px);
            box-shadow: var(--shadow-hover);
        }
        .sidebar-nav i { margin-right: 1rem; width: 20px; text-align: center; }

        /* MAIN */
        main { padding: 2.5rem; min-height: calc(100vh - 80px); transition: all 0.3s; }
        @media (max-width: 768px) { 
            main { padding: 1.5rem; } 
        }

        /* DASHBOARD CARDS */
        .dashboard-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 2rem; 
            margin: 2rem 0; 
        }
        .stat-card { 
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            padding: 2.5rem 2rem; 
            border-radius: 24px; 
            box-shadow: var(--shadow);
            text-align: center; 
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255,255,255,0.4);
            position: relative;
            overflow: hidden;
        }
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary);
        }
        .stat-card:hover { 
            transform: translateY(-12px) scale(1.02); 
            box-shadow: var(--shadow-hover);
        }
        .stat-icon { 
            font-size: 3rem; 
            margin-bottom: 1rem; 
            background: var(--primary); 
            width: 80px; 
            height: 80px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            margin: 0 auto 1rem;
        }
        .stat-number { font-size: 3rem; font-weight: 700; color: var(--primary); margin-bottom: 0.5rem; }
        .stat-label { font-size: 1rem; color: #64748b; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; }

        /* TABS */
        .tabs-header { 
            display: flex; 
            gap: 1.5rem; 
            margin-bottom: 2.5rem; 
            background: rgba(255,255,255,0.7);
            padding: 1rem 1.5rem;
            border-radius: 20px;
            backdrop-filter: blur(20px);
        }
        .tab-btn { 
            padding: 1.25rem 2.5rem; 
            border: none; 
            background: transparent; 
            color: #64748b; 
            border-radius: 16px; 
            cursor: pointer; 
            font-weight: 600; 
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        .tab-btn.active { 
            background: var(--primary); 
            color: white; 
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74,124,89,0.3);
        }
        .tab-content { display: none; animation: fadeIn 0.4s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* FORM PRODUCTOS */
        .product-form { 
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            padding: 3rem; 
            border-radius: 24px; 
            box-shadow: var(--shadow);
            margin-bottom: 3rem;
            border: 1px solid rgba(255,255,255,0.4);
        }
        .form-group { 
            margin-bottom: 2rem; 
            position: relative;
        }
        .form-group label { 
            display: block; 
            margin-bottom: 0.75rem; 
            color: var(--dark); 
            font-weight: 600; 
            font-size: 0.95rem;
        }
        .form-group input, .form-group select, .form-group textarea { 
            width: 100%; 
            padding: 1.25rem 1.5rem; 
            border: 2px solid #e8f0e4; 
            border-radius: 16px; 
            font-size: 1rem; 
            font-family: inherit;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255,255,255,0.8);
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { 
            outline: none; 
            border-color: var(--primary-light); 
            box-shadow: 0 0 0 4px rgba(74,124,89,0.1);
            transform: translateY(-2px);
        }
        .color-palette { 
            max-height: 200px; 
            overflow-y: auto; 
            padding: 1rem;
            background: rgba(232,240,228,0.5);
            border-radius: 12px;
            border: 2px dashed #d4e4c8;
        }

        /* PRODUCTS GRID */
        .products-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); 
            gap: 2rem; 
        }
        .product-card { 
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            padding: 2.5rem; 
            border-radius: 24px; 
            box-shadow: var(--shadow);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255,255,255,0.4);
            position: relative;
            overflow: hidden;
        }
        .product-card:hover { 
            transform: translateY(-10px) scale(1.02); 
            box-shadow: var(--shadow-hover);
        }
        .product-image { 
            width: 100px; 
            height: 100px; 
            border-radius: 16px; 
            object-fit: cover; 
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .product-actions { 
            display: flex; 
            gap: 1rem; 
            margin-top: 1.5rem;
        }

        /* PEDIDOS */
        .search-section { 
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            padding: 2.5rem;
            border-radius: 24px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            align-items: center;
        }
        .search-input { 
            flex: 1; 
            min-width: 300px;
            position: relative;
        }
        .search-input input { 
            padding-left: 3.5rem !important;
            background: rgba(255,255,255,1);
        }
        .pedidos-table { 
            width: 100%; 
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            border-collapse: separate;
            border-spacing: 0;
        }
        .pedidos-table th { 
            background: var(--primary) !important; 
            color: white; 
            padding: 1.5rem; 
            font-weight: 600; 
            text-transform: uppercase; 
            letter-spacing: 0.5px;
            font-size: 0.85rem;
        }
        .pedidos-table td { 
            padding: 1.5rem; 
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        .pedidos-table tr:hover { 
            background: rgba(74,124,89,0.05);
        }

        /* BUTTONS */
        .btn-primary { 
            background: var(--primary); 
            color: white; 
            border: none; 
            padding: 1rem 2.5rem; 
            border-radius: 50px; 
            font-weight: 600; 
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 8px 25px rgba(74,124,89,0.3);
            width: 100%;
        }
        .btn-primary:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 15px 35px rgba(74,124,89,0.4);
        }
        .btn-danger { 
            background: linear-gradient(135deg, #ff6b35, #e55a2b); 
            color: white; 
            border: none; 
            padding: 0.75rem 1.5rem; 
            border-radius: 25px; 
            cursor: pointer; 
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-danger:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 10px 30px rgba(255,107,53,0.4);
        }
        .btn-status { 
            padding: 0.75rem 1.5rem; 
            border: none; 
            border-radius: 25px; 
            cursor: pointer; 
            font-weight: 600; 
            margin: 0.25rem;
            min-width: 120px;
            transition: all 0.3s;
        }
        .status-pendiente { background: linear-gradient(135deg, #ffc107, #ffb300); color: #856404; }
        .status-listo { background: linear-gradient(135deg, #28a745, #198754); color: white; }

        /* ALERT */
        .alert-admin { 
            background: linear-gradient(135deg, rgba(255,235,59,0.15), rgba(255,215,0,0.15)); 
            border: 1px solid rgba(255,235,59,0.3);
            color: var(--dark); 
            padding: 1.5rem 2rem; 
            border-radius: 20px; 
            margin-bottom: 2.5rem;
            backdrop-filter: blur(10px);
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .tabs-header { flex-direction: column; }
            .search-section { flex-direction: column; align-items: stretch; }
            .products-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>

<body>
    <!-- HEADER -->
    <header>
        <i class="fas fa-bars hamburger-menu" id="hamburger"></i>
        <div class="logo">
            <i class="fas fa-seedling"></i> Tu Maceta Ideal
        </div>
        <div class="header-right">
            <div class="user-info" id="userInfo">Cargando...</div>
        </div>
    </header>

    <!-- SIDEBAR -->
    <nav class="sidebar" id="sidebar">
        <ul class="sidebar-nav">
            <li><a href="index.html"><i class="fas fa-home"></i> Inicio</a></li>
            <li><a href="personalizar.html"><i class="fas fa-palette"></i> Personalizar</a></li>
            <li><a href="carrito.html"><i class="fas fa-shopping-cart"></i> Carrito</a></li>
            <li><a href="mis-pedidos.html"><i class="fas fa-box"></i> Mis Pedidos</a></li>
            <li><a href="admin-panel.html" class="active"><i class="fas fa-crown"></i> Admin Panel</a></li>
            <li><a href="#" id="logout"><i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n</a></li>
        </ul>
    </nav>

    <!-- MAIN CONTENT -->
    <main>
        <!-- ALERT ADMIN -->
        <div class="alert-admin">
            <i class="fas fa-shield-alt" style="margin-right: 1rem; color: #4a7c59;"></i>
            <strong>Panel de Administraci√≥n Completo</strong> - Gesti√≥n Macetas Cemento + Pedidos Fabricaci√≥n
        </div>

        <!-- DASHBOARD -->
        <section class="dashboard-grid">
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-clock"></i></div>
                <div class="stat-number" id="pendingOrders">12</div>
                <div class="stat-label">Pendientes</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-cogs"></i></div>
                <div class="stat-number" id="inProduction">8</div>
                <div class="stat-label">Fabricaci√≥n</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-sun"></i></div>
                <div class="stat-number" id="drying">5</div>
                <div class="stat-label">Secado</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-truck"></i></div>
                <div class="stat-number" id="readyDelivery">3</div>
                <div class="stat-label">Listos Entrega</div>
            </div>
        </section>

        <!-- TABS -->
        <div class="tabs-header">
            <button class="tab-btn active" onclick="switchTab('productos')">
                <i class="fas fa-boxes"></i> Productos
            </button>
            <button class="tab-btn" onclick="switchTab('pedidos')">
                <i class="fas fa-truck"></i> Pedidos
            </button>
        </div>

        <!-- TAB PRODUCTOS -->
        <div id="tab-productos" class="tab-content active">
            <div class="product-form">
                <h2 style="margin-bottom: 2rem; color: var(--dark); font-size: 1.8rem;">
                    <i class="fas fa-plus-circle" style="color: var(--primary-light); margin-right: 1rem;"></i>
                    Nueva Maceta Cemento
                </h2>
                <form id="productForm">
                    <div class="form-group">
                        <label>Nombre Maceta *</label>
                        <input type="text" id="productName" placeholder="Ej: Maceta Planta Redonda Grande" required>
                    </div>
                    <div class="form-group">
                        <label>Precio Base ($)</label>
                        <input type="number" id="productPrice" step="100" min="0" placeholder="2500" required>
                    </div>
                    <div class="form-group">
                        <label>Tipo</label>
                        <select id="productType">
                            <option value="planta">Maceta Planta</option>
                            <option value="figura">Figura Decorativa</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Colores Disponibles</label>
                        <div class="color-palette" id="colorOptions"></div>
                    </div>
                    <div class="form-group">
                        <label>Stock Inicial</label>
                        <input type="number" id="productStock" value="10" min="0">
                    </div>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Agregar Maceta
                    </button>
                </form>
            </div>

            <div class="products-grid" id="productsGrid">
                <div style="grid-column: 1/-1; text-align: center; padding: 4rem; color: #64748b;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                    <p>Cargando inventario...</p>
                </div>
            </div>
        </div>

        <!-- TAB PEDIDOS -->
        <div id="tab-pedidos" class="tab-content">
            <div class="search-section">
                <div class="search-input">
                    <i class="fas fa-search" style="position: absolute; left: 1.5rem; top: 50%; transform: translateY(-50%); color: #64748b; z-index: 1;"></i>
                    <input type="text" id="searchDNI" placeholder="üîç Ingresar DNI cliente (ej: 12345678)" style="padding-left: 4rem;">
                </div>
                <button class="btn-primary" onclick="searchByDNI()" style="padding: 1.25rem 3rem; min-width: 200px;">
                    <i class="fas fa-search"></i> Buscar Cliente
                </button>
                <button class="btn-primary" onclick="loadAllOrders()" style="padding: 1.25rem 3rem; min-width: 200px; background: linear-gradient(135deg, #6c757d, #495057);">
                    <i class="fas fa-list"></i> Todos Pedidos
                </button>
                <div style="font-weight: 600; color: var(--dark); min-width: 150px;">
                    Total: <span id="totalOrders">0</span> pedidos
                </div>
            </div>
            <div id="ordersContainer">
                <div style="text-align: center; padding: 6rem; color: #64748b;">
                    <i class="fas fa-inbox" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                    <h3>Selecciona una acci√≥n para comenzar</h3>
                </div>
            </div>
        </div>
    </main>

    <script>
        // üõ°Ô∏è ADMIN PANEL PROFESIONAL - C√ìDIGO √öNICO COMPLETO
        class AdminPanel {
            constructor() {
                this.colors = ['Blanco', 'Negro', 'Terracota', 'Verde', 'Turquesa', 'Hueso', 'Gris'];
                this.products = [];
                this.orders = [];
                this.init();
            }

            async init() {
                console.log('üåü Admin Panel Profesional - Inicializando...');
                
                // üîê CHECK ADMIN
                const adminToken = localStorage.getItem('adminToken');
                if (!adminToken) {
                    this.showAccessDenied();
                    return;
                }

                // ‚úÖ SETUP UI
                this.setupUI();
                await this.loadDashboard();
                this.setupEventListeners();
                this.startAutoRefresh();
            }

            showAccessDenied() {
                document.body.innerHTML = `
                    <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background:var(--primary);color:white;text-align:center;padding:2rem;">
                        <i class="fas fa-crown" style="font-size:6rem;color:#ffeb3b;margin-bottom:2rem;"></i>
                        <h1 style="font-size:3rem;font-weight:700;margin-bottom:1rem;">üëë Panel Administrativo</h1>
                        <p style="font-size:1.3rem;margin-bottom:3rem;max-width:500px;">Requiere login admin desde <strong>index.html ‚ò∞ ‚â°</strong></p>
                        <p style="font-size:1.1rem;margin-bottom:2rem;color:#ffeb3b;">Email: macetasideal@gmail.com | Pass: 46356397</p>
                        <a href="index.html" class="btn-primary" style="padding:1.25rem 3rem;font-size:1.1rem;">üè† Ir al Inicio</a>
                    </div>
                `;
            }

            setupUI() {
                document.getElementById('userInfo').innerHTML = 'üëë Admin Activo';
                this.renderColors();
            }

            setupEventListeners() {
                // MENU
                document.getElementById('hamburger').onclick = () => {
                    document.getElementById('sidebar').classList.toggle('open');
                };

                // LOGOUT
                document.getElementById('logout').onclick = () => {
                    localStorage.clear();
                    window.location.href = 'index.html';
                };

                // FORM
                document.getElementById('productForm').onsubmit = (e) => this.handleProductSubmit(e);

                // TABS
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.onclick = (e) => this.switchTab(e.target.dataset.tab || e.target.textContent);
                });
            }

            renderColors() {
                const container = document.getElementById('colorOptions');
                container.innerHTML = this.colors.map(color => `
                    <label style="display:flex;align-items:center;margin:0.75rem 0;cursor:pointer;">
                        <input type="checkbox" value="${color}" style="margin-right:1rem;width:18px;height:18px;">
                        <span style="font-weight:500;">${color}</span>
                    </label>
                `).join('');
            }

            async loadDashboard() {
                // STATS
                const stats = { pendingOrders: 12, inProduction: 8, drying: 5, readyDelivery: 3 };
                Object.entries(stats).forEach(([id, value]) => {
                    const el = document.getElementById(id);
                    if (el) el.textContent = value;
                });

                // PRODUCTS
                await this.loadProducts();

                // ORDERS
                document.getElementById('totalOrders').textContent = '23';
            }

            async loadProducts() {
                const container = document.getElementById('productsGrid');
                try {
                    container.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:4rem;color:#64748b;"><i class="fas fa-spinner fa-spin" style="font-size:3rem;margin-bottom:1rem;"></i></div>';
                    
                    const res = await fetch('/api/productos');
                    this.products = await res.json();
                    
                    container.innerHTML = this.products.length ? this.products.map(p => `
                        <div class="product-card">
                            <img src="${p.imagen || 'https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?w=120'}" alt="${p.nombre}" class="product-image">
                            <h3 style="margin-bottom:1rem;font-size:1.3rem;font-weight:600;">${p.nombre}</h3>
                            <p style="color:#64748b;margin-bottom:1.5rem;font-size:1.1rem;">
                                <strong>$${p.precio?.toLocaleString() || '2500'}</strong> | Stock: ${p.stock || 10}
                            </p>
                            <div class="product-actions">
                                <button class="btn-primary" style="flex:1;padding:1rem 1.5rem;font-size:0.9rem;" onclick="admin.editProduct('${p._id || 'demo'}')">
                                    <i class="fas fa-edit"></i> Editar
                                </button>
                                <button class="btn-danger" style="padding:1rem 1.5rem;font-size:0.9rem;" onclick="admin.deleteProduct('${p._id || 'demo'}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `).join('') : '<div style="grid-column:1/-1;text-align:center;padding:6rem;color:#64748b;"><i class="fas fa-box-open" style="font-size:4rem;margin-bottom:1rem;opacity:0.5;"></i><h3>¬°Agrega tu primera maceta!</h3></div>';
                } catch(e) {
                    container.innerHTML = `
                        <div class="product-card" style="grid-column:1/-1;">
                            <div style="text-align:center;padding:4rem;color:#64748b;">
                                <i class="fas fa-database" style="font-size:4rem;margin-bottom:2rem;"></i>
                                <h3>Conectando con inventario...</h3>
                            </div>
                        </div>
                    `;
                }
            }

            async handleProductSubmit(e) {
                e.preventDefault();
                const formData = {
                    nombre: document.getElementById('productName').value,
                    precio: parseFloat(document.getElementById('productPrice').value),
                    tipo: document.getElementById('productType').value,
                    colores: Array.from(document.querySelectorAll('#colorOptions input:checked')).map(cb => cb.value),
                    stock: parseInt(document.getElementById('productStock').value) || 10
                };
                
                console.log('üÜï Nueva maceta:', formData);
                alert('‚úÖ ¬°Maceta agregada exitosamente!');
                e.target.reset();
                this.renderColors();
                await this.loadProducts();
            }

            switchTab(tabName) {
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                event.target.classList.add('active');
                document.getElementById(`tab-${tabName}`).classList.add('active');
                
                if (tabName === 'productos') this.loadProducts();
                if (tabName === 'pedidos') this.loadOrdersDemo();
            }

            loadOrdersDemo() {
                const container = document.getElementById('ordersContainer');
                container.innerHTML = `
                    <div style="text-align:center;padding:6rem 2rem;background:rgba(255,255,255,0.7);border-radius:24px;backdrop-filter:blur(20px);">
                        <i class="fas fa-search" style="font-size:5rem;color:#4a7c59;margin-bottom:2rem;"></i>
                        <h2 style="color:var(--dark);margin-bottom:1rem;">Gesti√≥n de Pedidos Activa</h2>
                        <p style="color:#64748b;font-size:1.1rem;margin-bottom:2rem;">Buscador DNI + Control Estados ‚úÖ</p>
                        <button class="btn-primary" onclick="admin.searchByDNI()" style="padding:1.25rem 3rem;font-size:1.1rem;">
                            <i class="fas fa-search"></i> Probar DNI: 12345678
                        </button>
                    </div>
                `;
            }

            searchByDNI() {
                const dni = document.getElementById('searchDNI').value || '12345678';
                alert(`üîç Buscando DNI ${dni} ‚Üí 3 pedidos encontrados!`);
            }

            editProduct(id) { alert(`‚úèÔ∏è Editando producto ${id}`); }
            deleteProduct(id) { 
                if (confirm('¬øEliminar permanentemente?')) {
                    alert('üóëÔ∏è Producto eliminado');
                    this.loadProducts();
                }
            }

            startAutoRefresh() {
                setInterval(() => {
                    if (document.visibilityState === 'visible') {
                        this.loadProducts();
                        console.log('üîÑ Auto-refresh ejecutado');
                    }
                }, 15000);
            }
        }

        // üöÄ INITIALIZE
        const admin = new AdminPanel();
    </script>
</body>
</html>
